<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            #caixaImg {
                width:145px;
                height: 169px;
                position: absolute;
                top:50%;
                left:50%;
                margin-left:-72px;
                margin-top:-84px;
            }
            p {
                text-align: center;
            }
        </style>
        <script>
            var g_personagem = "Pensativo";
            var g_nome;
            var g_cronometro;
            function mudarImagemOver() {
                if (g_personagem == "Pensativo") {
                    g_personagem = "Assustado";
                }
                else if (g_personagem == "Alegre")
                    clearTimeout(g_cronometro);
                else if (g_personagem == "Nervoso") {
                    g_personagem = "Alegre";
                    exibirMsg(g_nome + ", passei fome. Não suma novamente!");
                    setTimeout(exibirMsg, 4000, "");
                }
                document.getElementById("imgPersonagem").src="imagens/"+g_personagem+".png";
            }
            function mudarImagemOut() {
                if (g_personagem == "Alegre") {
                    //iniciar cronometro
                    g_cronometro = setTimeout(mudarImagemNervoso, 5000);
                }
                else if (g_personagem == "Assustado") {
                    g_personagem = "Pensativo";
                    document.getElementById("imgPersonagem").src="imagens/"+g_personagem+".png"; 
                }
            }
            function mudarImagemClick() {
                if (g_personagem == "Assustado") {
                    g_nome = prompt("Qual é o seu nome?");
                    g_personagem = "Alegre";
                    document.getElementById("imgPersonagem").src="imagens/"+g_personagem+".png"; 
                    exibirMsg(g_nome + ", gosto quando você interage comigo!");
                }
            }
            function exibirMsg(txt) {
                document.getElementById("txtMsg").innerHTML = txt;
            }
            function mudarImagemNervoso() {
                g_personagem = "Nervoso";
                document.getElementById("imgPersonagem").src="imagens/"+g_personagem+".png";
                exibirMsg(g_nome + ", volte aqui!");
                setTimeout(exibirMsg, 4000, "");
            }
        </script>
    </head>
    <body>
        <div id="caixaImg">
            <img id="imgPersonagem" src="imagens/Pensativo.png" 
                 onmouseover="mudarImagemOver()"
                 onmouseout="mudarImagemOut()"
                 onclick="mudarImagemClick()"
                 alt=""/>
            <p id="txtMsg"></p>
        </div>
    </body>
</html>
